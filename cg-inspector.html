<link rel="import" href="../magnet-hierarchy/magnet-hierarchy.html">

<!--
`cg-inspector` is a Polymer element which creates the inspector for codegraph. In other words, it creates the sidebar
that will be used 
methods and properties.
@group Codegraph
@element cg-inspector
@demo demo/index.html
-->
<dom-module id="cg-inspector">
    <style>
        :host {
            background: var(--cg-background-color);
            padding: 10px;
        }
        div {
            @apply(--cg-primary-text);
        }
        .title {
            @apply(--cg-title-text);
            font-size: 1.5em;
            padding: 10px;
            text-align: center;
        }
    </style>
    <template>
        <div class="layout vertical flex">
            <div class="title">Inspector</div>
            <magnet-hierarchy id="blocks"></magnet-hierarchy>
        </div>
    </template>
    <script>
        Polymer({
            is: "cg-inspector",
            properties: {
                models: {
                    type: Object,
                    value: {}
                }
            },
            ready: function () {
                this._models = [];
                this._folders = {};
                pandora.forEach(this.models, function (value, key) {
                    if (value.cgFolder) {
                        if (this._folders[value.cgFolder] === undefined) {
                            this._folders[value.cgFolder] = {group: {name: value.cgFolder, data: "item5", items: []}};
                            this._models.push(this._folders[value.cgFolder]);
                        }
                        this._folders[value.cgFolder].group.items.push({item: {name: key, data: value}});
                    } else {
                        this._models.push({item: {name: key, data: value}});
                    }
                }.bind(this));
                this.$.blocks.loadItems(this._models);
            }
        });
    </script>
</dom-module>