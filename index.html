<!doctype html>
<html>
<head>
    <title>CodeGraph</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <script src="../webcomponentsjs/webcomponents.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Indie+Flower' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Varela' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Cherry+Cream+Soda' rel='stylesheet' type='text/css'>
    <link rel="import" href="../core-drawer-panel/core-drawer-panel.html">
    <link rel="import" href="../core-header-panel/core-header-panel.html">
    <link rel="import" href="../core-toolbar/core-toolbar.html">
    <link rel="import" href="../core-ajax/core-ajax.html">
    <link rel="import" href="cg-app.html">
    <link rel="stylesheet" href="themes/base.css" shim-shadowdom>
    <link rel="stylesheet" href="themes/audigame/theme.css" shim-shadowdom>
</head>
<body fullbleed unresolved>
    <core-drawer-panel forceNarrow>
        <core-header-panel main>
            <core-toolbar>
                <paper-icon-button id="menu-btn" icon="menu" core-drawer-toggle></paper-icon-button>
                <div id="title" flex><img height="20" src="images/audigame_logo.png"></div>
                <paper-button class="dark" on-click="{{showDialog}}">Disconnect</paper-button>
            </core-toolbar>
            <template id="codegraph-demo" is="auto-binding">
                <core-ajax id="loader"
                           url="examples/audigame.json"
                           handleAs="json"
                           on-core-response="{{graphLoaded}}"
                           auto>
                </core-ajax>
                <cg-app id="codegraph" logo="images/dude_logo_dark.png"
                        themeUrl="themes/audigame"
                        layout horizontal fit>
                </cg-app>
            </template>
        </core-header-panel>
        <div drawer>
            <core-menu selected="2">
                <core-item label="Dashboard" icon="dashboard"></core-item>
                <core-item label="Shop" icon="shopping-cart"></core-item>
                <core-item label="Editor" icon="create"></core-item>
                <core-item label="Get the app!" icon="android"></core-item>
                <core-item label="Contact" icon="send"></core-item>
            </core-menu>
        </div>
    </core-drawer-panel>
    <script>
        var demo = document.querySelector("#codegraph-demo");
        demo.isLoading = true;
        demo.graphLoaded = function () {
            demo.isLoading = false;
            this.$.codegraph.graph = this.$.loader.response;
            this.$.codegraph.addEventListener("ready", function () {
                this.$.codegraph.createVariable("sound", "toto.mp3", "oijo2ij34o2i3j423uh4i23ueone2u3h2i3h24");
            }.bind(this));
            this.$.codegraph.addEventListener("variable.edit", function (e) {
                this.deleteVariable(e.detail.variable.previousName);
                this.createVariable(
                        e.detail.variable.data.valueType,
                        e.detail.variable.name,
                        e.detail.variable.data.value
                );
                this.showSuccess("Variable \"" + e.detail.variable.name + "\" successfully updated!");
                this.resetPicker();
            });
        };
    </script>
</body>
</html>