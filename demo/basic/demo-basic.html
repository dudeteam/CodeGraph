<!--
Copyright (c) 2015 DudeTeam. All rights reserved.
-->
<link rel="import" href="../../../polymer/polymer.html">
<link rel="import" href="../../../paper-toast/paper-toast.html">
<link rel="import" href="../../dude-graph-editor.html">
<link rel="import" href="../../dude-graph-inspector.html">
<link rel="import" href="../../dude-graph-toolbar.html">
<!--
`demo-basic` is a Polymer element to wrap a dude-graph demo
-->
<dom-module id="demo-basic">
    <template>
        <div class="layout horizontal fit">
            <paper-toast id="error"></paper-toast>
            <div class="layout vertical flex">
                <div class="layout horizontal flex">
                    <dude-graph-editor id="editor"
                                       class="layout horizontal flex-3"
                                       models="[[ models ]]"
                                       on-dude-graph-editor-error="_error">
                    </dude-graph-editor>
                    <dude-graph-inspector id="inspector"
                                          class="layout horizontal flex">
                    </dude-graph-inspector>
                </div>
                <dude-graph-toolbar id="toolbar"></dude-graph-toolbar>
            </div>
        </div>
    </template>
    <script>
        var graphData = {
            "blocks": [
                {
                    "cgType": "Block",
                    "cgId": "0",
                    "cgName": "Start",
                    "cgOutputs": [
                        {
                            "cgType": "Stream",
                            "cgName": "out"
                        }
                    ]
                },
                {
                    "cgType": "Block",
                    "cgId": "1",
                    "cgName": "End",
                    "cgInputs": [
                        {
                            "cgType": "Stream",
                            "cgName": "in"
                        }
                    ]
                }
            ]
        };
        var rendererData = {
            "zoom": {
                "translate": [100, 0],
                "scale": 1
            },
            "blocks": [
                {
                    "id": "0",
                    "cgBlock": "0",
                    "position": [100, 100]
                },
                {
                    "id": "1",
                    "cgBlock": "1",
                    "position": [350, 150]
                }
            ]
        };
        var models = [
            {
                "item": {
                    "name": "Middle",
                    "icon": "fa fa-plus-square",
                    "data": {
                        "cgType": "Block",
                        "cgName": "Middle",
                        "cgInputs": [
                            {
                                "cgType": "Stream",
                                "cgName": "in"
                            }
                        ],
                        "cgOutputs": [
                            {
                                "cgType": "Stream",
                                "cgName": "out"
                            }
                        ]
                    }
                }
            }
        ];
        Polymer({
            is: "demo-basic",
            properties: {
                "models": {
                    "value": models
                }
            },
            ready: function () {
                this.$.editor.start();
                this.$.inspector.start(this.$.editor);
                this.$.toolbar.start(this.$.editor, this.$.inspector);
                this.$.editor.load(graphData, rendererData);
            },
            _error: function (e) {
                this.$.error.text = e.detail.error;
                this.$.error.show();
            }
        });
    </script>
</dom-module>