<link rel="import" href="../themes/dude.html">
<link rel="import" href="../cg-element.html">
<link rel="import" href="../cg-inspector.html">
<dom-module id="demo-wrapper">
    <style>
        #wrapper {
            border: 4px solid #242424;
        }
        .panel {
            border: 4px solid #242424;
        }
    </style>
    <template>
        <div id="wrapper" class="layout horizontal fit">
            <cg-element id="element"
                        class="panel layout horizontal flex-2"
                        graph-data="{{graphData}}"
                        renderer-data="{{rendererData}}"
                        models-data="{{modelsData}}"
                        on-error="_handleError">
            </cg-element>
            <cg-inspector id="inspector"
                          class="panel layout horizontal flex"
                          models="{{modelsData}}"
                          on-save="_graphSaved"
                          on-compile="_graphCompiled"
                          on-error="_handleError"></cg-inspector>
        </div>
    </template>
    <script src="dude-models.js"></script>
    <script src="shader-graph-models.js"></script>
    <script src="demo-shader.js"></script>
    <script src="demo-basic.js"></script>
    <script src="demo-shoot-behavior.js"></script>
    <script src="dude-saver.js"></script>
    <script src="shader-saver.js"></script>
    <script>
        Polymer({
            is: "demo-wrapper",
            properties: {
                modelsData: {
                    type: Object,
                    value: DUDE_MODELS
                },
                graphData: {
                    type: Object,
                    value: DEMO_SHOOT_BEHAVIOR_GRAPH_DATA
                },
                rendererData: {
                    type: Object,
                    value: DEMO_SHOOT_BEHAVIOR_RENDERER_DATA
                }
            },
            ready: function () {
                this.$.inspector.bindElement(this.$.element);
                this.$.inspector.bindBuilder(new DudeSaver());
            },
            _graphSaved: function (e) {
                console.log(e.detail);
            },
            _graphCompiled: function (e) {
                console.log(e.detail);
            },
            _handleError: function (e) {
                console.log("error: ", e.detail.message);
            }
        });
    </script>
</dom-module>