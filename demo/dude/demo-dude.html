<!--
Copyright (c) 2015 DudeTeam. All rights reserved.
-->
<link rel="import" href="../../../polymer/polymer.html">
<link rel="import" href="../../../iron-localstorage/iron-localstorage.html">
<link rel="import" href="../../dude-graph.html">

<script src="demo-data.js"></script>
<script src="demo-models.js"></script>
<!--
`demo-dude` is a Polymer element to wrap a dude-graph demo
-->
<dom-module id="demo-dude">
    <style>
        #context {
            @apply(--layout-horizontal);
            @apply(--layout-flex);
        }
    </style>
    <template>
        <iron-localstorage
                name="dude-graph-data"
                value="{{ graphData }}"
                on-iron-localstorage-load-empty="_loadDefaults">
        </iron-localstorage>
        <iron-localstorage
                name="dude-graph-renderer-data"
                value="{{ rendererData }}"
                on-iron-localstorage-load-empty="_loadDefaults">
        </iron-localstorage>
        <dude-graph id="context"
                    graph-data="{{ graphData }}"
                    renderer-data="{{ rendererData }}"
                    models="{{ models }}"></dude-graph>
    </template>
    <script>
        Polymer({
            is: "demo-dude",
            properties: {
                /**
                 * The graph data
                 */
                "graphData": {
                    "type": Object,
                    "value": DEMO_DUDE_GRAPH_DATA
                },

                /**
                 * The renderer config
                 */
                "rendererConfig": {
                    "type": Object,
                    "value": {}
                },

                /**
                 * The renderer data
                 */
                "rendererData": {
                    "type": Object,
                    "value": DEMO_DUDE_RENDERER_DATA
                },

                /**
                 * The model data
                 */
                "models": {
                    "type": Array,
                    "value": DEMO_DUDE_MODEL_DATA
                }
            },

            /**
             * Called when the graphData and rendererData are empty in localStorage
             * @private
             */
            _loadDefaults: function () {
                console.log("load defaults!!!");
                this.set("graphData", DEMO_DUDE_GRAPH_DATA);
                this.set("rendererData", DEMO_DUDE_RENDERER_DATA);
            }

        });
    </script>
</dom-module>