<link rel="import" href="../bower_components/polymer/polymer.html">
<polymer-element name="code-graph">
    <template>
        <style>
            #area {
                background: rgba(0, 0, 0, .8);
                width: 1200px;
                height: 480px;
            }
        </style>
        <div id="area"></div>
    </template>
    <script src="../bower_components/raphael/raphael.js"></script>
    <script src="../scripts/draggable.js"></script>
    <script src="../scripts/connection.js"></script>
    <script src="../scripts/point.js"></script>
    <script src="../scripts/action.js"></script>
    <script src="../scripts/graph.js"></script>
    <script>
        Polymer({
            ready: function() {
                var r = Raphael(this.$.area, 1200, 480);
                r.graph({
                    "actions": {
                        "blurShader": {
                            "x": 150,
                            "y": 300,
                            "inputs": [],
                            "outputs": [{"type": "color", "name": "gl_FragColor"}]
                        },
                        "bwShader": {
                            "x": 250,
                            "y": 100,
                            "inputs": [],
                            "outputs": [{"type": "color", "name": "gl_FragColor"}]
                        },
                        "mixShaders": {
                            "x": 450,
                            "y": 150,
                            "inputs": [{"type": "color", "name": "first"}, {"type": "color", "name": "second"}],
                            "outputs": [{"type": "color", "name": "gl_FragColor"}]
                        },
                        "finalOutput": {
                            "x": 700,
                            "y": 200,
                            "inputs": [{"type": "color", "name": "result"}],
                            "outputs": []
                        }
                    },
                    "connections": [
                        {"from": "blurShader.gl_FragColor", "to": "mixShaders.second"},
                        {"from": "bwShader.gl_FragColor", "to": "mixShaders.first"}//,
//                        {"from": "mixShaders.gl_FragColor", "to": "finalOutput.result"}
                    ]
                });
            }
        });
    </script>
</polymer-element>