<!--
It's the most important polymer component of CodeGraph. It creates the SVG graph and handle user inputs interactions
to add blocks/groups, remove or move them.
-->
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../bower_components/paper-dialog/paper-action-dialog.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<polymer-element name="cg-graph" attributes="theme url">
    <template>
        <link rel="stylesheet" href="cg-graph.css">
        <core-ajax id="config" url="themes/{{theme}}.json" handleAs="json" auto></core-ajax>
        <core-ajax id="data" url="{{url}}" handleAs="json" auto></core-ajax>
       <div id="shadow-dom-bug">
           <svg id="svg"></svg>
       </div>
        <paper-toast id="error"></paper-toast>
        <paper-action-dialog id="groupDialog" heading="Create a new group" transition="core-transition-top" backdrop>
            <paper-input autofocus value="{{groupTitle}}" label="Group title"></paper-input>
            <paper-button dismissive>Cancel</paper-button>
            <paper-button on-click="{{createGroup}}" affirmative default>Create</paper-button>
        </paper-action-dialog>
        <paper-action-dialog id="actionDialog" heading="Add a new action" transition="core-transition-top" backdrop>
            <paper-input autofocus value="{{model}}" label="Action model"></paper-input>
            <div>
                <template repeat="{{ model in modelList }}">
                    <div>{{ model }}</div>
                </template>
            </div>
            <paper-button dismissive>Cancel</paper-button>
            <paper-button on-click="{{createAction}}" affirmative default>Create</paper-button>
        </paper-action-dialog>
    </template>
    <!-- Vendors -->
    <script src="../bower_components/d3/d3.js"></script>
    <script src="../bower_components/jwerty/jwerty.js"></script>
    <script src="../bower_components/pandora/lib/pandora.js"></script>
    <!-- CodeGraph library -->
    <script src="../lib/index.js"></script>
    <!-- CodeGraph graph -->
    <script src="../lib/graph/utils/graph-error.js"></script>
    <script src="../lib/graph/nodes/entity.js"></script>
    <script src="../lib/graph/utils/container.js"></script>
    <script src="../lib/graph/nodes/group.js"></script>
    <script src="../lib/graph/nodes/point.js"></script>
    <script src="../lib/graph/models/model.js"></script>
    <script src="../lib/graph/models/getter.js"></script>
    <script src="../lib/graph/models/picker.js"></script>
    <script src="../lib/graph/models/action.js"></script>
    <script src="../lib/graph/nodes/block.js"></script>
    <script src="../lib/graph/nodes/connection.js"></script>
    <script src="../lib/graph/nodes/graph.js"></script>
    <!-- CodeGraph renderer -->
    <script src="../lib/renderer/renderer.js"></script>
    <script src="../lib/renderer/utils/renderer-error.js"></script>
    <script src="../lib/renderer/utils/renderer-position.js"></script>
    <script src="../lib/renderer/render/render.js"></script>
    <script src="../lib/renderer/render/render-selection.js"></script>
    <script src="../lib/renderer/render/render-zoom.js"></script>
    <script src="../lib/renderer/render/render-block.js"></script>
    <script src="../lib/renderer/render/render-group.js"></script>
    <script src="../lib/renderer/render/render-connection.js"></script>
    <script src="../lib/renderer/render/render-point.js"></script>
    <!-- CodeGraph serialization -->
    <script src="../lib/serialization/json-saver.js"></script>
    <script src="../lib/serialization/json-loader.js"></script>
    <!-- CodeGraph misc -->
    <script src="cg-graph.js"></script>
</polymer-element>