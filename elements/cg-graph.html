<!--
It's the most important polymer component of CodeGraph. It creates the SVG graph and handle user inputs interactions
to add blocks/groups, remove or move them.
-->
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../bower_components/paper-dialog/paper-action-dialog.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<style>
    #group {
        border-radius: 5px;
        font-family: "Varela Round", sans-serif;
    }
</style>
<polymer-element name="cg-graph" attributes="theme url">
    <template>
        <link rel="stylesheet" href="cg-graph.css">
        <core-ajax id="config" url="themes/{{theme}}.json" handleAs="json"></core-ajax>
        <core-ajax id="data" url="{{url}}" handleAs="json"></core-ajax>
        <svg id="graph">
            <filter id="dropshadow" height="130%">
                <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
                <feComponentTransfer>
                    <feFuncA type="linear" slope="0.2"/>
                </feComponentTransfer>
                <feMerge>
                    <feMergeNode/>
                    <feMergeNode in="SourceGraphic"/>
                </feMerge>
            </filter>
        </svg>
        <paper-toast id="error"></paper-toast>
        <paper-action-dialog id="groupDialog" heading="Create a new group" transition="core-transition-top" backdrop>
            <paper-input autofocus value="{{groupTitle}}" label="Group title"></paper-input>
            <paper-button dismissive>Cancel</paper-button>
            <paper-button on-click="{{createGroup}}" affirmative default>Create</paper-button>
        </paper-action-dialog>
        <paper-action-dialog id="actionDialog" heading="Add a new action" transition="core-transition-top" backdrop>
            <paper-input autofocus value="{{model}}" label="Action model"></paper-input>
            <div>
                <template repeat="{{ model in modelList }}">
                    <div>{{ model }}</div>
                </template>
            </div>
            <paper-button dismissive>Cancel</paper-button>
            <paper-button on-click="{{createAction}}" affirmative default>Create</paper-button>
        </paper-action-dialog>
    </template>
    <!-- Vendors -->
    <script src="../bower_components/jwerty/jwerty.js"></script>
    <script src="../bower_components/interact/interact.js"></script>
    <script src="../bower_components/Snap.svg/dist/snap.svg.js"></script>
    <script src="../bower_components/pandora/lib/pandora.js"></script>
    <!-- CodeGraph library -->
    <script src="../lib/index.js"></script>
    <script src="../lib/graph/utils/graph-error.js"></script>
    <script src="../lib/graph/nodes/node.js"></script>
    <script src="../lib/graph/utils/container.js"></script>
    <script src="../lib/graph/nodes/group.js"></script>
    <script src="../lib/graph/nodes/point.js"></script>
    <script src="../lib/graph/models/model.js"></script>
    <script src="../lib/graph/models/getter.js"></script>
    <script src="../lib/graph/models/picker.js"></script>
    <script src="../lib/graph/models/action.js"></script>
    <script src="../lib/graph/nodes/block.js"></script>
    <script src="../lib/graph/nodes/connection.js"></script>
    <script src="../lib/graph/nodes/graph.js"></script>
    <script src="../lib/renderer/renderer-error.js"></script>
    <script src="../lib/renderer/index.js"></script>
    <script src="../lib/renderer/cursor-point.js"></script>
    <script src="../lib/renderer/utils.js"></script>
    <script src="../lib/renderer/pickers.js"></script>
    <script src="../lib/renderer/zoom.js"></script>
    <script src="../lib/renderer/grid.js"></script>
    <script src="../lib/renderer/render-graph.js"></script>
    <script src="../lib/renderer/render-container.js"></script>
    <script src="../lib/renderer/render-group.js"></script>
    <script src="../lib/renderer/render-block.js"></script>
    <script src="../lib/renderer/render-point.js"></script>
    <script src="../lib/renderer/render-connection.js"></script>
    <script src="../lib/serialization/json-saver.js"></script>
    <script src="../lib/serialization/json-loader.js"></script>
    <script src="cg-graph.js"></script>
</polymer-element>